#!/bin/bash

################################################################################
# print_header
################################################################################

function print_header() {

cat << __HEREDOC__
--------------------------------------------------------------------------------
$1
--------------------------------------------------------------------------------
__HEREDOC__
}

################################################################################
# main
################################################################################

LOG_FILE='../logs/autobuild.log' && :> ../logs/autobuild.log

#for FILE in 010*; do
for FILE in [0-9]*; do

    if [ -x "$FILE" ]; then
        if [ -f "$FILE" ]; then
            print_header $FILE | tee -a ../logs/$0.log
            ( source $FILE ) | tee -a $LOG_FILE
        elif [ -d "$FILE" ] && [ -x "$FILE/install/autobuild" ]; then
            print_header $FILE | tee -a ../logs/$0.log            
            ( pushd $FILE/install; source ./autobuild; popd ) | tee -a $LOG_FILE
        fi
    fi

done

################################################################################
# end
################################################################################

